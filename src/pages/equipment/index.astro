---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getEquipment, getEquipmentTypes } from "../../data/equipment";
import { withBase } from "../../utils/paths";

const equipment = await getEquipment();
const equipmentTypes = await getEquipmentTypes();
const grouped = equipmentTypes.map((type) => ({
  type,
  items: equipment.filter((item) => item.type === type)
}));
---
<BaseLayout title="Equipment Â· Beans" description="Coffee gear references." initialCommand="$ bean equipment">
  <section class="hero">
    <h1>Equipment namespaces</h1>
    <p>Grinders, brewers, and tools referenced by beans.</p>
  </section>
  {grouped.map((group) => (
    <section class="window" aria-labelledby={`equipment-${group.type}`}>
      <h2 id={`equipment-${group.type}`} class="section-title">
        {group.type}
      </h2>
      <ul class="table-list">
        {group.items.map((item) => (
          <li>
            <a href={withBase(`/equipment/${item.slug}/`)}>[{item.name}]</a>
          </li>
        ))}
      </ul>
    </section>
  ))}
</BaseLayout>
